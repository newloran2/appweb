<!DOCTYPE html>
<html lang="en">
<head>
    <title>Pipeline Stages</title>
    <!-- Copyright Embedthis Software, LLC, 2003-2014. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="appweb, embedded web server, embedded, devices, http server, internet of things, esp, goahead" />
    <meta name="description" content="The fastest little web server" />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
    <link href="../lib/semantic/themes/packages/beach.css" rel="stylesheet" type="text/css" />
    <link href="../css/all.css" rel="stylesheet" type="text/css" />
    <link href="../images/favicon.ico" rel="shortcut icon" />

</head>
<body>
        <div class="sidebar">
        <div class="ui large left vertical inverted labeled menu">
            <div class="item">
                <a href="../index.html" class="logo">Appweb Docs</a>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../index.html">Home</a>
                    <a class="item" href="../users/features.html">Appweb Features</a>
                    <a class="item" href="https://embedthis.com/appweb/download.html">Download</a> 
                    <a class="item" href="../licensing/index.html">Licensing</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../start/index.html">Getting Started</a>
                    <a class="item" href="../start/quick.html">Quick Start</a>
                    <a class="item" href="../start/installing.html">Installing Appweb</a>
                    <a class="item" href="../start/starting.html">Starting and Stopping</a>
                    <a class="item" href="../start/service.html">Running as a Service</a>
                    <a class="item" href="../start/releaseNotes.html">Release Notes</a>
                    <a class="item" href="../start/source.html">Building from Source</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../users/index.html">User's Guide</a>
                    <a class="item" href="../users/configuration.html">Configuring Appweb</a>
                    <a class="item" href="../users/directives.html">Configuration Directives</a>
                    <a class="item" href="../users/frameworks.html">Web Frameworks</a>
                    <a class="item" href="../users/modules.html">Using Loadable Modules</a>
                    <a class="item" href="../users/ports.html">Ports and Binding</a>
                    <a class="item" href="../users/routing.html">Routing Requests</a>
                    <a class="item" href="../users/stages.html">Request Pipeline</a>
                    <a class="item" href="../users/lang.html">Multi-Language Content</a>
                    <a class="item" href="../users/authentication.html">User Authorization</a>
                    <a class="item" href="../users/logFiles.html">Logging</a>
                    <a class="item" href="../users/caching.html">Caching</a>
                    <a class="item" href="../users/vhosts.html">Virtual Hosts</a>
                    <a class="item" href="../users/ssl.html">Secure Sockets (SSL)</a>
                    <a class="item" href="../users/client.html">Http Client</a>
                    <a class="item" href="../users/security.html">Security Considerations</a>
                    <a class="item" href="../users/monitor.html">Monitoring and Defending</a>
                    <a class="item" href="../users/uploading.html">File Upload</a>
                    <a class="item" href="../users/webSockets.html">WebSockets</a>
                    <a class="item" href="../users/man.html">Man Pages</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../developers/index.html">Developer's Guide</a>
                    <a class="item" href="../developers/embedding.html">Embedding Appweb</a>
                    <a class="item" href="../developers/modules.html">Creating Appweb Modules</a>
                    <a class="item" href="../developers/handlers.html">Creating Appweb Handlers</a>
                    <a class="item" href="../developers/stages.html">Creating Pipeline Stages</a>
                    <a class="item" href="../developers/migrating.html">Migrating to Appweb 5</a>
                    <a class="item" href="../developers/rom.html">Serving Pages from ROM</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../ref/index.html">Reference Guide</a>
                    <a class="item" href="../ref/compatibility.html">Compatibility</a>
                    <a class="item" href="../ref/native.html">Native APIs</a>
                    <a class="item" href="../ref/architecture.html">Appweb Architecture</a>
                    <a class="item" href="../ref/memory.html">Appweb Memory Allocation</a>
                    <a class="item" href="../ref/multithread.html">Multithreaded Programming</a>
                    <a class="item" href="../standards/http.html">HTTP References</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../developers/project.html">Project Resources</a>
                    <a class="item" href="http://goo.gl/dGRDl4">Official Appweb News</a>
                    <a class="item" href="https://embedthis.com/appweb/">Appweb Web Site</a>
                    <a class="item" href="https://github.com/embedthis/appweb">Source Code Repository</a>
                    <a class="item" href="https://github.com/embedthis/appweb/issues">Project Issue Database</a>
                    <a class="item" href="https://github.com/embedthis/appweb/releases">Change Log</a>
                    <a class="item" href="https://github.com/embedthis/appweb/milestones">Roadmap</a>
                    <a class="item" href="https://embedthis.com/developers/contributors.html">Contributors Agreement</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <span class="header item">Links</span>
                    <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                    <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                    <a class="item" href="http://twitter.com/mobstream">Twitter</a>
                </div>
            </div>
        </div>
    </div>

    <div class="ui sidebar-launch button">
        <i class="icon list layout"></i>
    </div>





    <div class="masthead">
         
        <div class="ui inverted menu">
            <div class="right menu">
                  
                    <a class="item" href="https://embedthis.com/">Embedthis</a>
                    <a class="item" href="https://embedthis.com/appweb/">Appweb Site</a>
                    <a class="item" href="http://goo.gl/dGRDl4">Appweb News</a>
                    <a class="item" href="https://github.com/embedthis/appweb">Repository</a>
                    <a class="item" href="https://embedthis.com/blog/">Blog</a>
                    <a class="item" href="https://twitter.com/mobstream">Twitter</a>

            </div>
        </div>
        
        <div class="ui breadcrumb">
            <a class="section" href="../">Home</a>
            
            <div class="divider">/</div>
            <a class="section" href="index.html">
                User's Guide
            </a>
            
            
            <div class="divider">/</div>
            <a class="active section" href="stages.html">Pipeline Stages</a>
            
        </div>
        
        <div class="ui right floated basic segment version">
            v5.2.0
        </div>

    </div>
    <div class="content">

            <h1>Configuring Pipeline Stages</h1>
            <p>Appweb uses a bidirectional pipeline to process requests and generate responses. This consists of a
            mechanism of queues, packets, buffering and event scheduling. The pipeline architecture is highly optimized
            and supports the efficient transmission of data without copying.</p>
            <p>The request pipeline is comprised of an incoming and outgoing stream. Each stream is in turn comprised
            of stages.</p>
            <img src="../images/pipeline.jpg" alt="pipeline" class="centered"/>
            <p>Stages come in three varieties:</p>
            <ul>
                <li>Handlers</li>
                <li>Filters</li>
                <li>Network Connectors</li>
            </ul>
            <p>Handlers are responsible for generating the response content. Filters permute the request or incoming
            and outgoing data in some way, and network connectors send the final response over the network to the
            client.</p>
            <p>Appweb has a set of handlers for common application and content types. Different handlers service
            different content. Appweb provides the following handlers: PHP, CGI, ESP, Ejscript, directory listings,
            and a file handler for static file content. An API is also provided so you can create your own
            request handlers and pipeline filters and connectors.</p>
            <h2>Handlers</h2>
            <p>Appweb handlers typically utilize the Appweb <a href="modules.html">loadable module</a> interface and
            may be dynamically loaded and configured via the <a href="configuration.html">Appweb configuration
            file</a>. The configuration file defines the handlers to use and the order in which they are matched to a
            given request.</p><a id="handlerProcessing"></a>
            <h3>Handler Processing</h3>
            <p>The following is an example set of Appweb configuration file directives that loads modules and defines
            the handlers to process client requests.</p>
            <pre class="ui code segment">
<a href="dir/module.html#loadModule">LoadModule</a> ejs mod_ejs
LoadModule file mod_file
<a href="dir/route.html#addHandler">AddHandler</a> ejsHandler ejs
<a href="dir/route.html#addHandler">AddHandler</a> fileHandler
</pre>
            <p>The order of the directives is important. When a request is received from a client, the handlers
            specified in the configuration file will be matched against the request. If a handler does not specify an
            extension, then it will always match. If the request URL
            extension matches the extension for a handler, then that handler will be added to the list of handlers for
            this request.</p>
            <p>For example: "http://www.acme.com/myDoc.esp" would match the ".esp" extension for the ejsHandler. The
            result is a list of handlers that will be applied to the request in the order they appear in the
            configuration file. The first matching handler to accept the request will be responsible for the
            request.</p>
            <h2>Filters</h2>
            <p>Filters can manipulate the request as it passes through the request pipeline. Typical uses are to
            compress or encrypt data. Appweb implements Transfer Chunk Encoding and Ranged requests via filters. 
            Filters are configured via the <a href="dir/route.html#addInputFilter">AddInputFilter</a>
            and <a href="dir/route.html#addOutputFilter">AddOutputFilter</a> configuration file directives.</p>
            <h2>Connectors</h2>
            <p>Network connectors are the end of the outgoing stream of the pipeline. Their job is to transmit data
            back to the client. Appweb supplies two connectors. One general purpose <b>net</b> connector and a
            specialize <b>send</b> connector for static file content.</p>
            <p>Please see the document <a href="../developers/stages.html">Extending via Pipeline Stages</a> for
            programming information about how to create Appweb handlers, filters and connectors.</p>

    </div>
    <div class="terms ui basic center aligned segment">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.
            Generated on Sep 15, 2014.
        </p>
    </div>

    <script src="../lib/jquery/jquery.js"></script>
    <script src="../lib/semantic/js/semantic.js"></script>
    <script>
        var sl = $('.sidebar-launch');
        $('.sidebar-launch').click(function() {
            var body = $('body');
            if (!body.hasClass('show-sidebar')) {
                body.addClass('show-sidebar');
                $('.sidebar').css('visibility', 'visible');
            } else {
                body.removeClass('show-sidebar');
                $('.sidebar').css('visibility', 'hidden');
            }
        });
        $('.sidebar-launch').trigger('click');

        $(function() {
            var url = '../users/stages.html';
            var active = $('.sidebar a[href="' + url +'"]');
            active.addClass('active');
            var sidebar = $(".sidebar");
            var height = sidebar.height();
            var offset = active.offset();
            if (offset && offset.top >= height) {
                var diff = height - active.offset().top;
                sidebar.scrollTop(height);
            }
        });
    </script> 

</body>
</html>
